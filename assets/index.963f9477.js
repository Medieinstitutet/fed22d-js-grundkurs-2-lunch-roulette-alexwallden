var S=Object.defineProperty;var O=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var m=(o,e,t)=>(O(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&p(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function p(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();class v{constructor(e=0,t=0){m(this,"lat");m(this,"lng");this.lat=e,this.lng=t}}const q=()=>new Promise((o,e)=>{navigator.geolocation.getCurrentPosition(t=>o(new v(t.coords.latitude,t.coords.longitude)),t=>{if(t.code===1){o(null);return}e(console.error(t.message))})});let s;const f=document.querySelector("#app"),g=document.querySelector("#btn"),h=document.querySelector("#remove-btn"),N=Array.from(document.querySelectorAll('input[name="range-input"]'));let y=500,i=null;const a=[];N.forEach(o=>{o.addEventListener("click",()=>{const e=document.querySelector('input[name="range-input"]:checked');e&&(y=Number(e.value))})});function b(){a.slice(1).forEach(o=>{o.setMap(null)}),a.splice(1)}h==null||h.addEventListener("click",b);function P(){b();const o={location:i,radius:y,type:["restaurant"]};function e(n,c){n.open(s,c)}function t(n,c){n.close(s,c)}function p(n,c){if(c===google.maps.places.PlacesServiceStatus.OK&&a.length>0){a.splice(1),console.log(n);for(let u=0;u<n.length;u++){const l=n[u];if(l.business_status==="OPERATIONAL"&&l.opening_hours&&l.opening_hours.open_now){const L=l.geometry.location.lat(),E=l.geometry.location.lng(),M=new v(L,E),d=new google.maps.Marker({position:M}),w=new google.maps.InfoWindow({content:`<h2 style="color: black">${l.name}</h2>`});d.addListener("mouseover",()=>e(w,d)),d.addListener("mouseout",()=>t(w,d)),a.push(d)}}a.forEach(u=>{u.setMap(s)})}switch(y){case 500:s.setZoom(15);break;case 1e3:s.setZoom(14);break;case 3e3:s.setZoom(12);break;default:s.setZoom(12);break}}new google.maps.places.PlacesService(s).nearbySearch(o,p)}g==null||g.addEventListener("click",P);function k(){const o=document.querySelector("#map");s=new google.maps.Map(o,{zoom:15,center:i});const e=new google.maps.Marker({position:i});a.push(e),a.forEach(t=>{t.setMap(s)})}const A=async()=>{i=await q(),i&&f?(f.innerHTML=`Din position \xE4r ${i.lat} och ${i.lng}`,window.initMap=k,k()):f&&(f.innerHTML="Du beh\xF6ver aktivera platstj\xE4nster")};A().then(()=>{console.log("Appen startad!"),i&&console.log(`Din position \xE4r: ${i.lat} lat, ${i.lng} lng`)}).catch(o=>{console.error(o)});
