var S=Object.defineProperty;var O=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f=(t,e,n)=>(O(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();class k{constructor(e=0,n=0){f(this,"lat");f(this,"lng");this.lat=e,this.lng=n}}const q=()=>new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(n=>t(new k(n.coords.latitude,n.coords.longitude)),n=>{if(n.code===1){t(null);return}e(console.error(n.message))})});let a;const u=document.querySelector("#app"),g=document.querySelector("#btn"),m=document.querySelector("#remove-btn"),N=Array.from(document.querySelectorAll('input[name="range-input"]')),y=[];let p=500,c=null;const l=[];N.forEach(t=>{t.addEventListener("click",()=>{const e=document.querySelector('input[name="range-input"]:checked');e&&(p=Number(e.value))})});function v(){l.slice(1).forEach(t=>{t.setMap(null)}),l.splice(1)}m==null||m.addEventListener("click",v);function P(){v();const t={location:c,radius:p,type:["restaurant"]};console.log(p);function e(o,r){o.open(a,r)}function n(o,r){if(r===google.maps.places.PlacesServiceStatus.OK&&l.length>0){l.splice(1),console.log(o);for(let s=0;s<o.length;s++){const i=o[s];if(i.business_status==="OPERATIONAL"&&i.opening_hours&&i.opening_hours.open_now){const b=i.geometry.location.lat(),E=i.geometry.location.lng(),L=new k(b,E),M=new google.maps.Marker({position:L});l.push(M),y.push(i.name)}}l.forEach((s,i)=>{if(s.setMap(a),i>0){const h=new google.maps.InfoWindow({content:`<h2 style="color: black">${y[i-1]}</h2>`});s.addListener("click",()=>e(h,s))}})}switch(p){case 500:a.setZoom(15);break;case 1e3:a.setZoom(14);break;case 3e3:a.setZoom(12);break;default:a.setZoom(12);break}}new google.maps.places.PlacesService(a).nearbySearch(t,n)}g==null||g.addEventListener("click",P);function w(){const t=document.querySelector("#map");a=new google.maps.Map(t,{zoom:15,center:c});const e=new google.maps.Marker({position:c});l.push(e),l.forEach(n=>{n.setMap(a)})}const A=async()=>{c=await q(),c&&u?(u.innerHTML=`Din position \xE4r ${c.lat} och ${c.lng}`,window.initMap=w,w()):u&&(u.innerHTML="Du beh\xF6ver aktivera platstj\xE4nster")};A().then(()=>{console.log("Appen startad!"),c&&console.log(`Din position \xE4r: ${c.lat} lat, ${c.lng} lng`)}).catch(t=>{console.error(t)});
