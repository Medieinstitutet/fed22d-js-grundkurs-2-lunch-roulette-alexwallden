var S=Object.defineProperty;var q=(e,o,n)=>o in e?S(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var g=(e,o,n)=>(q(e,typeof o!="symbol"?o+"":o,n),n);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class b{constructor(o=0,n=0){g(this,"lat");g(this,"lng");this.lat=o,this.lng=n}}const O=()=>new Promise((e,o)=>{navigator.geolocation.getCurrentPosition(n=>e(new b(n.coords.latitude,n.coords.longitude)),n=>{if(n.code===1){e(null);return}o(console.error(n.message))})});let c;const d=document.querySelector("#app"),m=document.querySelector("#retrieve-btn"),f=document.querySelector("#remove-btn"),h=document.querySelector("#roulette-btn"),N=Array.from(document.querySelectorAll('input[name="range-input"]'));let y=500,i=null;const s=[];let w;N.forEach(e=>{e.addEventListener("click",()=>{const o=document.querySelector('input[name="range-input"]:checked');o&&(y=Number(o.value))})});function v(e){e.forEach(o=>{o.setMap(c)})}function p(){s.slice(1).forEach(e=>{e.setMap(null)}),s.splice(1),console.log(s)}function P(e,o){e.open(c,o)}function A(e,o){e.close(c,o)}function R(e,o){if(o===google.maps.places.PlacesServiceStatus.OK&&s.length>0){p(),console.log(s),console.log(e);for(let n=0;n<e.length;n++){const a=e[n];if(a.business_status==="OPERATIONAL"&&a.opening_hours&&a.opening_hours.open_now){const r=a.geometry.location.lat(),l=a.geometry.location.lng(),E=new b(r,l),u=new google.maps.Marker({position:E}),k=new google.maps.InfoWindow({content:`<h2 style="color: black">${a.name}</h2>`});u.addListener("click",()=>P(k,u)),u.addListener("click",()=>A(k,u)),s.push(u)}}v(s)}switch(y){case 500:c.setZoom(15);break;case 1e3:c.setZoom(14);break;case 3e3:c.setZoom(12);break;default:c.setZoom(12);break}}f==null||f.addEventListener("click",p);function L(){p();const e={location:i,radius:y,type:["restaurant"]};new google.maps.places.PlacesService(c).nearbySearch(e,R)}m==null||m.addEventListener("click",L);function M(){const e=document.querySelector("#map");c=new google.maps.Map(e,{zoom:15,center:i});const o=new google.maps.Marker({position:i});s.push(o),v(s)}function x(){L(),setTimeout(()=>{const e=Math.floor(Math.random()*(s.length-1));console.log(e),w=s[e],p(),console.log(s),w.setMap(c)},1e3)}h==null||h.addEventListener("click",x);const C=async()=>{i=await O(),i&&d?(d.innerHTML=`Din position \xE4r ${i.lat} och ${i.lng}`,window.initMap=M,M()):d&&(d.innerHTML="Du beh\xF6ver aktivera platstj\xE4nster")};C().then(()=>{console.log("Appen startad!"),i&&console.log(`Din position \xE4r: ${i.lat} lat, ${i.lng} lng`)}).catch(e=>{console.error(e)});
